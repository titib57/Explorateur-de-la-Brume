<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Créer un personnage-Explorateur de la Brume</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <header class="game-header">
        <h1>Explorateur de la Brume</h1>
        <nav>
        </nav>
    </header>

    <main class="game-container">
        <h2>Création de personnage</h2>
        <form id="character-form">
            <div class="form-group">
                <label for="char-name">Nom du personnage :</label>
                <input type="text" id="char-name" required placeholder="Saisissez un nom">
            </div>

            <div class="form-group">
                <label for="char-age">Âge :</label>
                <input type="number" id="char-age" min="15" max="100" value="20">
            </div>

            <div class="form-group">
                <label for="char-height">Taille (cm) :</label>
                <input type="number" id="char-height" min="150" max="220" value="175">
            </div>

            <div class="form-group">
                <label for="char-weight">Poids (kg) :</label>
                <input type="number" id="char-weight" min="50" max="150" value="70">
            </div>

            <div class="form-group">
                <label for="char-morphology">Morphologie :</label>
                <select id="char-morphology">
                    <option value="mince">Mince</option>
                    <option value="normal">Normal</option>
                    <option value="musclé">Musclé</option>
                    <option value="robuste">Robuste</option>
                </select>
            </div>

            <button type="submit" class="btn-primary">Créer le personnage</button>
        </form>
    </main>
    <div id="notification-container"></div>
    <script src="js/game.js"></script>
    <script src="js/utils.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('character-form').addEventListener('submit', (e) => {
                e.preventDefault();

                const newCharacter = {
                    name: document.getElementById('char-name').value,
                    age: parseInt(document.getElementById('char-age').value),
                    height: parseInt(document.getElementById('char-height').value),
                    weight: parseInt(document.getElementById('char-weight').value),
                    morphology: document.getElementById('char-morphology').value,
                    class: 'explorateur',
                    xp: 0,
                    level: 1,
                    xpToNextLevel: 100,
                    statPoints: 5,
                    skillPoints: 1,
                    gold: 0,
                    stats: {
                        strength: 1,
                        intelligence: 1,
                        speed: 1,
                        dexterity: 1
                    },
                    unlockedSkills: ['fist_attack'],
                    unlockedClasses: ['explorateur'],
                    inventory: [],
                    equipment: {
                        weapon: null,
                        armor: null
                    },
                    quests: {}
                };

                saveCharacter(newCharacter);
                
                if (localStorage.getItem('playerCharacter')) {
                    showNotification('Personnage créé avec succès !', 'success');
                    setTimeout(() => {
                        window.location.href = 'stats.html';
                    }, 2000);
                } else {
                    showNotification('Erreur: Impossible de sauvegarder le personnage. Veuillez réessayer.', 'error');
                }
            });
        });
    </script>
</body>
</html>